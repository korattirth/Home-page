@{ ViewData["Title"] = "Block User";}
@model List<BlockUserViewModel>
<section style="margin-top:75px;">
    <div class="welcome_div">
        <h1 class="welcome_text">Welcome,<span style="font-weight: bold;" id="UserName"></span> </h1>
    </div>
    <div class="middle_section">
        <div class="main_div">
            <div class="perent_div">
                <div class="child_div_1">
                    <div>
                        <div class="services">
                            <p class="services_text">Dashboard</p>
                        </div>
                        <a asp-controller="ServicesProvider" asp-action="NewServicesRequest" style="text-decoration:none">
                            <div class="services">
                                <p class="services_text">New Services Request</p>
                            </div>
                        </a>
                        <a asp-controller="ServicesProvider" asp-action="UpcomingServicesRequest" style="text-decoration:none">
                            <div class="services">
                                <p class="services_text">Upcoming Services</p>
                            </div>
                        </a>
                        <div class="services">
                            <p class="services_text">Services Schedule</p>
                        </div>
                        <a asp-controller="ServicesProvider" asp-action="ServicesHistory" style="text-decoration:none">
                            <div class="services">
                                <p class="services_text">Services History</p>
                            </div>
                        </a>
                        <a asp-controller="ServicesProvider" asp-action="MyRatting" style="text-decoration:none">
                            <div class="services" >
                                <p class="services_text">My Ratings</p>
                            </div>
                        </a>
                        <a asp-controller="ServicesProvider" asp-action="BlockUser" style="text-decoration:none">
                            <div class="services" style="background-color:#146371">
                                <p class="services_text">Block Customer</p>
                            </div>
                        </a>
                        <div class="services">
                            <p class="services_text">Invoices</p>
                        </div>
                    </div>
                </div>
                <div class="child_div_2">
                    <section>
                        <div>
                            <div class="row">
                                @foreach (var item in Model)
                                {
                                <div class="col-3 border d-flex m-2" style="height: 150px;flex-direction: column;justify-content: space-evenly;align-items: center;">
                                    <div class="hat_img">
                                        <img src="~/img/forma-24.png" alt="">
                                    </div>
                                    <p class="m-0">@item.FirstName @item.LastName</p>
                                    @if (item.IsBlock)
                                    {
                                        <div id="UnBlock">
                                            <button class="btn-danger" value="@item.UserId" onclick="UnblockUser(this.value)" style="border-radius: 20px; border: none;width: 70px;height: 30px;">UnBlock</button>
                                        </div>
                                    }
                                    else
                                    {
                                        <div id=" Block">
                                            <button class="btn-danger" value="@item.UserId" onclick="blockUser(this.value)" style="border-radius: 20px; border: none;width: 70px;height: 30px;">Block</button>
                                        </div>
                                    }
                                </div>
                                }
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </div>
</section>
<style>
    /* welcome text */
    .welcome_div {
        height: 119px;
        margin-top: 70px;
        background-color: #F9F9F9;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .welcome_text {
        font-family: Roboto;
        font-size: 30px;
        font-weight: normal;
        font-stretch: normal;
        font-style: normal;
        line-height: 0.8;
        letter-spacing: normal;
        text-align: right;
        color: #4f4f4f;
    }
    /* middle section */
    .middle_section {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        margin-top: 31px;
        margin-bottom: 30px;
    }

    .main_div {
        width: 1200px;
    }

    .perent_div {
        display: flex;
        flex-wrap: wrap;
    }

    .child_div_1 {
        flex: 20%;
        background-color: #1d7a8c;
        margin-right: 31px;
    }

    .child_div_2 {
        flex: 70%;
    }

    .services {
        border-bottom: 1px solid rgba(255, 255, 255,0.2);
        height: 54px;
    }
    .services_text {
        font-family: Roboto;
        font-size: 18px;
        font-weight: normal;
        font-stretch: normal;
        font-style: normal;
        line-height: 3.06;
        letter-spacing: normal;
        text-align: left;
        color: white;
        margin-left: 15px;
        cursor: pointer;
    }

    .history_div {
        display: flex;
        align-items: center;
        justify-content: space-between;
        /* width: 840px; */
    }

    .hat_img {
        height: 44px;
        width: 44px;
        border-radius: 22px;
        border: 1px solid #aaa;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-right: 12px;
    }

    
    /* for responsive */
    @@media only Screen and (max-width:1267px) {
        .history_div {
            width: 100%;
        }

        .page_num {
            width: 100%
        }

        .main_div {
            width: 1000px;
        }

        .services {
            height: auto;
        }

        .child_div_1 {
            flex: 15%;
            margin-right: 10px;
        }
    }

    @@media only Screen and (max-width:1040px) {
        .main_div {
            width: 900px;
        }

        .colum_man {
            padding: 9px 12px;
        }
    }

    @@media only Screen and (max-width:935px) {
        .main_div {
            width: 800px;
        }

        .colum_man {
            padding: 9px 5px;
        }
    }

    @@media only Screen and (max-width:840px) {
        .main_div {
            width: 600px;
        }

        .table_res {
            width: auto;
            overflow-x: auto;
            margin-right: 10px;
        }

        .child_div_2 {
            width: 350px;
        }

        .page_num {
            flex-direction: column;
        }

        .right_page {
            margin: 15px 0px;
        }
    }

    @@media only Screen and (max-width:767px) {
        .nav_bar, .nav_bar.active {
            height: auto;
        }
    }

    @@media only Screen and (max-width:745px) {
        .for_facebook {
            margin-right: 0px;
        }

        .footer_nav {
            margin: 0px 5px;
        }

        .footer_logo {
            margin-left: 10px;
        }

        .main_div {
            width: 600px;
        }
    }

    @@media only Screen and (max-width:655px) {
        .footer_nav {
            margin: 0px 2px;
        }

        .footer_logo {
            width: 80px;
            margin-left: 10px;
        }

        .first_child {
            flex: 15%;
        }

        .secound_child {
            flex: 65%;
        }

        .main_div {
            width: 450px;
        }

        .services_text {
            margin-right: 10px;
        }

        .child_div_2 {
            width: 300px;
        }
    }

    @@media only Screen and (max-width:590px) {
        .footer_ul {
            flex-direction: column;
            align-items: center;
        }

        .footer_ul {
            padding: 0;
        }
    }

    @@media only Screen and (max-width:475px) {
        .main_div {
            width: 350px;
        }

        .child_div_1 {
            margin: 0;
            margin-bottom: 20px;
        }

        .services {
            height: 50px;
            display: flex;
            justify-content: center;
        }
    }

    @@media only Screen and (max-width:370px) {
        .main_div {
            width: 250px;
        }

        .child_div_2 {
            width: 150px;
        }

        .page_round {
            width: 30px;
            height: 30px;
        }
    }

    @@media only Screen and (max-width:285px) {
        .main_div {
            width: 200px;
        }
    }
</style>

@section scripts{ 
    <script>
        function blockUser(userId) {
        $.ajax({
            type: "POST",
            url: "@Url.Action("BlockCustomer")",
            data: { "userId": userId },
            success: function (result) {
                location.reload();
            },
            error: function () {
                console.log("somthing Went Wrong")
            }
        })
    }
        function UnblockUser(userId) {
        $.ajax({
            type: "POST",
            url: "@Url.Action("UnBlockCustomer")",
            data: { "userId": userId },
            success: function (result) {
                location.reload();
            },
            error: function () {
                console.log("somthing Went Wrong")
            }
        })
    }
    </script>
}