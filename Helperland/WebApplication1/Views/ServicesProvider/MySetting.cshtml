@{ ViewData["Title"] = "My Setting";}
@model ServicesProviderSettingViewModel
<section style="margin-top:75px;">
    <div class="middle_section">
        <div class="main_div">
            <div class="perent_div">
                <div class="child_div_1">
                    <div>
                        <div class="services">
                            <p class="services_text">Dashboard</p>
                        </div>
                        <a asp-controller="ServicesProvider" asp-action="NewServicesRequest" style="text-decoration:none">
                            <div class="services">
                                <p class="services_text">New Services Request</p>
                            </div>
                        </a>
                        <a asp-controller="ServicesProvider" asp-action="UpcomingServicesRequest" style="text-decoration:none">
                            <div class="services">
                                <p class="services_text">Upcoming Services</p>
                            </div>
                        </a>
                        <div class="services">
                            <p class="services_text">Services Schedule</p>
                        </div>
                        <a asp-controller="ServicesProvider" asp-action="ServicesHistory" style="text-decoration:none">
                            <div class="services">
                                <p class="services_text">Services History</p>
                            </div>
                        </a>
                        <a asp-controller="ServicesProvider" asp-action="MyRatting" style="text-decoration:none">
                            <div class="services">
                                <p class="services_text">My Ratings</p>
                            </div>
                        </a>
                        <a asp-controller="ServicesProvider" asp-action="BlockUser" style="text-decoration:none">
                            <div class="services">
                                <p class="services_text">Block Customer</p>
                            </div>
                        </a>
                        <div class="services">
                            <p class="services_text">Invoices</p>
                        </div>
                    </div>
                </div>
                <div class="child_div_2">
                    <div>
                        <div class="d-flex text-center">
                            <p class="Top_header active" style="cursor: pointer;" id="hader1">My Details</p>
                            <p class="Top_header" style="cursor: pointer;" id="hader2">Change password</p>
                        </div>
                    </div>
                    <section id="myDetails">
                        @if (Model.ActiveStatus == 1)
                        {
                            <p class="m-0 lable_text">Account Status : <span style="color: green;">Active</span></p>
                        }
                        else if (Model.ActiveStatus == 0)
                        {
                            <p class="m-0 lable_text">Account Status : <span style="color: Red;">InActive</span></p>
                        }
                        <div class="d-flex justify-content-between mt-3">
                            <p class="m-0 lable_text" style="font-size: 20px;">Basic Details</p>
                            <div class="hat_img">
                                @if (Model.Avtar.Equals("one"))
                                {
                                    <img src="~/img/forma-24.png" alt="">
                                }
                                @if (Model.Avtar.Equals("two"))
                                {
                                    <img src="~/img/two.jpeg" alt="">
                                }
                                @if (Model.Avtar.Equals("three"))
                                {
                                    <img src="~/img/three.jpeg" alt="">
                                }
                                @if (Model.Avtar.Equals("four"))
                                {
                                    <img src="~/img/four.jpeg" alt="">
                                }
                                @if (Model.Avtar.Equals("five"))
                                {
                                    <img src="~/img/five.jpeg" alt="">
                                }
                            </div>
                        </div>
                        <div style="border-bottom: 2px solid #646464;"></div>
                        <div class="alert alert-success alert-dismissible d-none" id="successDiv">
                            <button type="button" class="close" data-dismiss="alert">&times;</button>
                            <strong>Success!</strong> Your Details Is Updated.
                        </div>
                        <div class="alert alert-danger alert-dismissible d-none" id="ErrorDiv">
                            <button type="button" class="close" data-dismiss="alert">&times;</button>
                            <strong>Danger!</strong> Please Enter Required Fileds.
                        </div>
                        <div class="row mt-3">
                            <div class="col-4">
                                <label for="" class="m-0 lable_text">First Name</label><br>
                                <input type="text" value="@Model.FirstName" id="firstName" />
                            </div>
                            <div class="col-4">
                                <label for="" class="m-0 lable_text">Last Name</label><br>
                                <input type="text" value="@Model.LastName" id="lastName" />
                            </div>
                            <div class="col-4">
                                <label for="" class="m-0 lable_text">Email Address</label><br>
                                <input type="email" value="@Model.Email" id="email" />
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-4">
                                <label for="" class="m-0 lable_text">Phone Number</label><br>
                                <input type="number" value="@Model.PhoneNumber" id="phoneNumber" />
                            </div>
                            <div class="col-4">
                                <label for="" class="m-0 lable_text">Date Of Birth</label><br>
                                <input type="date" value="@Model.DateOfBirth" id="dateOfBirth" />
                            </div>
                            <div class="col-4">
                                <label for="" class="m-0 lable_text">Nationality</label><br>
                                @if (Model.Nationality == 1)
                                {
                                    <select id="nationality">
                                        <option value="1" selected>India</option>
                                        <option value="2">Usa</option>
                                        <option value="3">Uk</option>
                                    </select>
                                }
                                else if (Model.Nationality == 2)
                                {
                                    <select id="nationality">
                                        <option value="1">India</option>
                                        <option value="2" selected>Usa</option>
                                        <option value="3">Uk</option>
                                    </select>
                                }
                                else
                                {
                                    <select id="nationality">
                                        <option value="1">India</option>
                                        <option value="2">Usa</option>
                                        <option value="3" selected>Uk</option>
                                    </select>
                                }
                            </div>
                        </div>
                        <div class="row mb-5 mt-3">
                            <div class="col-5">
                                <label for="" class="m-0 lable_text">Gender</label><br>
                                @if (Model.Gender == 1)
                                {
                                    <label for="Male" class="m-0 lable_text">Male</label>
                                    <input class="mr-2" type="radio" checked="checked" id="Male" name="Gender" value="1">
                                    <label for="Female" class="m-0 lable_text">Female</label>
                                    <input class="mr-2" type="radio" id="Female" name="Gender" value="2">
                                    <label for="Third" class="m-0 lable_text">Rather Not To Say</label>
                                    <input type="radio" id="Third" name="Gender" value="3">
                                }
                                else if (Model.Gender == 2)
                                {
                                    <label for="Male" class="m-0 lable_text">Male</label>
                                    <input class="mr-2" type="radio" id="Male" name="Gender" value="1">
                                    <label for="Female" class="m-0 lable_text">Female</label>
                                    <input class="mr-2" type="radio" id="Female" checked="checked" name="Gender" value="2">
                                    <label for="Third" class="m-0 lable_text">Rather Not To Say</label>
                                    <input type="radio" id="Third" name="Gender" value="3">
                                }
                                else
                                {
                                    <label for="Male" class="m-0 lable_text">Male</label>
                                    <input class="mr-2" type="radio" id="Male" name="Gender" value="1">
                                    <label for="Female" class="m-0 lable_text">Female</label>
                                    <input class="mr-2" type="radio" id="Female" name="Gender" value="2">
                                    <label for="Third" class="m-0 lable_text">Rather Not To Say</label>
                                    <input type="radio" id="Third" name="Gender" checked="checked" value="3">
                                }
                            </div>
                        </div>
                        <div>
                            <p class="m-1 lable_text">Select Avtar</p>
                            <div class="d-flex">
                                @if (Model.Avtar.Equals("one"))
                                {
                                    <input type="radio" value="one" name="Avtar" hidden id="Avtar1" />
                                    <label for="Avtar1">
                                        <div class="hat_img BorderAdd" id="profile1">
                                            <img src="~/img/forma-24.png" alt="">
                                        </div>
                                    </label>
                                }
                                else
                                {
                                    <input type="radio" value="one" name="Avtar" hidden id="Avtar1" />
                                    <label for="Avtar1">
                                        <div class="hat_img" id="profile1">
                                            <img src="~/img/forma-24.png" alt="">
                                        </div>
                                    </label>
                                }
                                @if (Model.Avtar.Equals("two"))
                                {
                                    <input type="radio" value="two" name="Avtar" hidden id="Avtar2" />
                                    <label for="Avtar2">
                                        <div class="hat_img BorderAdd" id="profile2">
                                            <img src="~/img/two.jpeg" style="width:70%" alt="">
                                        </div>
                                    </label>
                                }
                                else
                                {
                                    <input type="radio" value="two" name="Avtar" hidden id="Avtar2" />
                                    <label for="Avtar2">
                                        <div class="hat_img" id="profile2">
                                            <img src="~/img/two.jpeg" style="width:70%" alt="">
                                        </div>
                                    </label>
                                }
                                @if (Model.Avtar.Equals("three"))
                                {
                                    <input type="radio" value="three" name="Avtar" hidden id="Avtar3" />
                                    <label for="Avtar3">
                                        <div class="hat_img BorderAdd" id="profile3">
                                            <img src="~/img/three.jpeg" style="width:70%" alt="">
                                        </div>
                                    </label>
                                }
                                else
                                {
                                    <input type="radio" value="three" name="Avtar" hidden id="Avtar3" />
                                    <label for="Avtar3">
                                        <div class="hat_img" id="profile3">
                                            <img src="~/img/three.jpeg" style="width:70%" alt="">
                                        </div>
                                    </label>
                                }
                                @if (Model.Avtar.Equals("four"))
                                {
                                    <input type="radio" value="four" name="Avtar" hidden id="Avtar4" />
                                    <label for="Avtar4">
                                        <div class="hat_img BorderAdd" id="profile4">
                                            <img src="~/img/four.jpeg" style="width:70%" alt="">
                                        </div>
                                    </label>
                                }
                                else
                                {
                                    <input type="radio" value="four" name="Avtar" hidden id="Avtar4" />
                                    <label for="Avtar4">
                                        <div class="hat_img" id="profile4">
                                            <img src="~/img/four.jpeg" alt="" style="width:70%">
                                        </div>
                                    </label>
                                }
                                @if (Model.Avtar.Equals("five"))
                                {
                                    <input type="radio" value="five" name="Avtar" hidden id="Avtar5" />
                                    <label for="Avtar5">
                                        <div class="hat_img BorderAdd" id="profile5">
                                            <img src="~/img/five.jpeg" style="width:70%" alt="">
                                        </div>
                                    </label>
                                }
                                else
                                {
                                    <input type="radio" value="five" name="Avtar" hidden id="Avtar5" />
                                    <label for="Avtar5">
                                        <div class="hat_img" id="profile5">
                                            <img src="~/img/five.jpeg" style="width:70%" alt="">
                                        </div>
                                    </label>
                                }
                            </div>
                        </div>
                        <p class="m-0 mt-3 lable_text">My Address</p>
                        <div style="border-bottom: 2px solid #646464;"></div>
                        <div class="row mt-3">
                            <div class="col-4">
                                <label for="" class="m-0 lable_text">Street Name</label><br>
                                <input type="text" value="@Model.StreetName" id="streetName" />
                            </div>
                            <div class="col-4">
                                <label for="" class="m-0 lable_text">House Number</label><br>
                                <input type="text" value="@Model.HouseNumber" id="houseNumber" />
                            </div>
                            <div class="col-4">
                                <label for="" class="m-0 lable_text">Postal Code</label><br>
                                <input type="number" value="@Model.Postalcode" id="postalCode" />
                            </div>
                            <div class="col-4 mt-3">
                                <label for="" class="m-0 lable_text">City</label><br>
                                <input type="text" value=" @Model.City" id="city" />
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-4" style="border-bottom: 2px solid #646464;"></div>
                        </div>
                        <div class="mt-2">
                            <button class="btn mt-2" style="background-color: #1d7a8c;color: white;" value="@Model.UserID" onclick="UpdateDetails(this.value)">Save</button>
                        </div>

                    </section>
                    <!-- change password -->
                    <section id="password" class="d-none">
                        <div class="alert alert-success alert-dismissible d-none" id="successPasswordDiv">
                            <button type="button" class="close" data-dismiss="alert">&times;</button>
                            <strong>Success!</strong> Your Password Is Updated.
                        </div>
                        <div class="alert alert-danger alert-dismissible d-none" id="ErrorpasswordDiv">
                            <button type="button" class="close" data-dismiss="alert">&times;</button>
                            <strong>Danger!</strong> Please Enter Valid Password.
                        </div>
                        <div>
                            <label for="" class="m-0 lable_text">Current Password</label><br>
                            <input type="password" id="currentPassword" /><br />
                            <span id="currentPasswordValidation" class="text-danger"></span>
                        </div>
                        <div class="mt-3">
                            <label for="" class="m-0 lable_text">New Password</label><br>
                            <input type="password" id="NewPassword" /><br />
                            <span id="NewPasswordValidation" class="text-danger"></span>
                        </div>
                        <div class="mt-3">
                            <label for="" class="m-0 lable_text">Confirm Password</label><br>
                            <input type="password" id="confirmPassword" /><br />
                            <span id="confirmPasswordValidation" class="text-danger"></span>
                        </div>
                        <button type="reset" class="btn mt-3" style="background-color: #1d7a8c;color: white;" onclick="UpdatePassword()">Save</button>
                    </section>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
    /* welcome text */
    .welcome_div {
        height: 119px;
        margin-top: 70px;
        background-color: #F9F9F9;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .welcome_text {
        font-family: Roboto;
        font-size: 30px;
        font-weight: normal;
        font-stretch: normal;
        font-style: normal;
        line-height: 0.8;
        letter-spacing: normal;
        text-align: right;
        color: #4f4f4f;
    }
    /* middle section */
    .middle_section {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        margin-top: 31px;
        margin-bottom: 30px;
    }

    .main_div {
        width: 1200px;
    }

    .perent_div {
        display: flex;
        flex-wrap: wrap;
    }

    .child_div_1 {
        flex: 20%;
        background-color: #1d7a8c;
        margin-right: 31px;
    }

    .child_div_2 {
        flex: 70%;
    }

    .services {
        border-bottom: 1px solid rgba(255, 255, 255,0.2);
        height: 54px;
    }

    .services_text {
        font-family: Roboto;
        font-size: 18px;
        font-weight: normal;
        font-stretch: normal;
        font-style: normal;
        line-height: 3.06;
        letter-spacing: normal;
        text-align: left;
        color: white;
        margin-left: 15px;
        cursor: pointer;
    }

    .hat_img {
        height: 44px;
        width: 44px;
        border-radius: 22px;
        border: 1px solid #aaa;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-right: 12px;
    }
    .BorderAdd {
        border: 3px solid #1d7a8c;
    }
    .Top_header {
        width: 50%;
        border-bottom: 3px solid #646464;
        font-weight: 500;
        color: #565656;
    }

        .Top_header.active {
            border-bottom: 6px solid #1d7a8c;
        }
    /* for responsive */
    @@media only Screen and (max-width:1267px) {
        .main_div {
            width: 1000px;
        }

        .services {
            height: auto;
        }

        .child_div_1 {
            flex: 15%;
            margin-right: 10px;
        }
    }

    @@media only Screen and (max-width:1040px) {
        .main_div {
            width: 900px;
        }
    }

    @@media only Screen and (max-width:935px) {
        .main_div {
            width: 800px;
        }
    }

    @@media only Screen and (max-width:840px) {
        .main_div {
            width: 600px;
        }
        .child_div_2 {
            width: 350px;
        }
    }

    @@media only Screen and (max-width:767px) {
        .nav_bar, .nav_bar.active {
            height: auto;
        }
    }

    @@media only Screen and (max-width:745px) {
        .main_div {
            width: 600px;
        }
    }

    @@media only Screen and (max-width:655px) {
        .main_div {
            width: 450px;
        }

        .services_text {
            margin-right: 10px;
        }

        .child_div_2 {
            width: 300px;
        }
    }

    @@media only Screen and (max-width:475px) {
        .main_div {
            width: 350px;
        }

        .child_div_1 {
            margin: 0;
            margin-bottom: 20px;
        }
        .services {
            height: 50px;
            display: flex;
            justify-content: center;
        }
    }

    @@media only Screen and (max-width:370px) {
        .main_div {
            width: 250px;
        }

        .child_div_2 {
            width: 150px;
        }
    }

    @@media only Screen and (max-width:285px) {
        .main_div {
            width: 200px;
        }
    }
</style>

@section scripts{ 
    <script>
        function UpdateDetails(UserId) {
            var firstName = $("#firstName").val();
            var lastName = $("#lastName").val();
            var phoneNumber = $("#phoneNumber").val();
            var email = $("#email").val();
            var dateOfBirth = $("#dateOfBirth").val();
            var nationality = $("#nationality").val();
            var gender = $("input[type='radio'][name='Gender']:checked").val();
            var avtar = $("input[type='radio'][name='Avtar']:checked").val();
            var streetname = $("#streetName").val();
            var houseNumber = $("#houseNumber").val();
            var postalCode = $("#postalCode").val();
            var city = $("#city").val();
            if (firstName == "" || lastName == "" || phoneNumber == "" || email == "" || dateOfBirth == "" || nationality == "" || gender == "" || avtar == "" || streetname == "" || houseNumber == "" || postalCode == "" || city == "") {
                $("#ErrorDiv").removeClass("d-none")
            }
            else {
                $.ajax({
                type: "POST",
                    url: "@Url.Action("UpdateDetails")",
                    data: {
                        "firstName": firstName,
                        "lastName": lastName,
                        "phoneNumber": phoneNumber,
                        "email": email,
                        "dateOfbirth": dateOfBirth,
                        "nationality": nationality,
                        "gender": gender,
                        "avtar": avtar,
                        "streetName": streetname,
                        "houseNumber": houseNumber,
                        "postalCode": postalCode,
                        "city": city,
                        "userId": UserId
                    },
                    success: function (result) {
                        $("#successDiv").removeClass("d-none")
                        location.reload();
                    },
                    error: function () {
                        console.log("Somthing Went Wrong");
                    }
            })
            }

        }
        @*UpdatePassWord*@
        function UpdatePassword() {
            var currentPassword = $("#currentPassword").val();
            var newPassword = $("#NewPassword").val();
            var confirmPassword = $("#confirmPassword").val();
            if (currentPassword == "") {
                $("#currentPasswordValidation").text("Please Enter Current Password")
            }
            if (newPassword == "") {
                $("#NewPasswordValidation").text("Please Enter New Password")
            }
            if (confirmPassword == "") {
                $("#confirmPasswordValidation").text("Please Enter Confirm Password")
            }
            if (confirmPassword != newPassword) {
                $("#confirmPasswordValidation").text("Please Match Confirm and New Password")
            }
            else {
                $.ajax({
                    type: "POST",
                    url: "@Url.Action("ChangePassword")",
                    data: { "CurrentPassword": currentPassword, "NewPassword": newPassword },
                    success: function (result) {
                        if (result) {
                            $("#successPasswordDiv").removeClass("d-none")
                        }
                        else {
                            $("#ErrorpasswordDiv").removeClass("d-none")
                        }
                    },
                    error: function () {
                        console.log("Somthing Went Wrong")
                    }
                })
            }

        }
        $(document).ready(function () {
            $("#profile1").click(function () {
                $("#profile1").addClass("BorderAdd")
                $("#profile2").removeClass("BorderAdd")
                $("#profile3").removeClass("BorderAdd")
                $("#profile4").removeClass("BorderAdd")
                $("#profile5").removeClass("BorderAdd")
            })
            $("#profile2").click(function () {
                $("#profile2").addClass("BorderAdd")
                $("#profile1").removeClass("BorderAdd")
                $("#profile3").removeClass("BorderAdd")
                $("#profile4").removeClass("BorderAdd")
                $("#profile5").removeClass("BorderAdd")
            })
            $("#profile3").click(function () {
                $("#profile3").addClass("BorderAdd")
                $("#profile2").removeClass("BorderAdd")
                $("#profile1").removeClass("BorderAdd")
                $("#profile4").removeClass("BorderAdd")
                $("#profile5").removeClass("BorderAdd")
            })
            $("#profile4").click(function () {
                $("#profile4").addClass("BorderAdd")
                $("#profile2").removeClass("BorderAdd")
                $("#profile3").removeClass("BorderAdd")
                $("#profile1").removeClass("BorderAdd")
                $("#profile5").removeClass("BorderAdd")
            })
            $("#profile5").click(function () {
                $("#profile5").addClass("BorderAdd")
                $("#profile2").removeClass("BorderAdd")
                $("#profile3").removeClass("BorderAdd")
                $("#profile4").removeClass("BorderAdd")
                $("#profile1").removeClass("BorderAdd")
            })
            $("#hader2").click(function () {
                $("#myDetails").addClass("d-none");
                $("#password").removeClass("d-none");
                $("#hader2").addClass("active");
                $("#hader1").removeClass("active");
            })
            $("#hader1").click(function () {
                $("#myDetails").removeClass("d-none");
                $("#password").addClass("d-none");
                $("#hader2").removeClass("active");
                $("#hader1").addClass("active");
            })

        })
    </script>
}